<!DOCTYPE html>
<html lang="en">

<head>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@5.x/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
</head>

<body>
    <v-app id="app" style="font-family: roboto;">

        <!-- Filter Container -->
        <v-container fluid>
            <!-- Filters Axios Search -->
            <v-row align="center">
                <v-col class="d-flex" cols="12" sm="6">
                    <v-select :items="months" label="Month" outlined></v-select>
                </v-col>
            </v-row>

            <!-- Filters the search results -->
            <v-row align="center">
                <v-col class="d-flex" cols="12" sm="6">
                    <v-select label="Sort By" outlined></v-select>
                </v-col>
                <v-col class="d-flex" cols="12" sm="6">
                    <v-select label="Order By" outlined></v-select>
                </v-col>
            </v-row>
        </v-container>

        <!-- Competition Cards -->
        <v-card max-width="344" v-for="competition in competitions" style="margin-bottom: 20px;">

            <!-- Header Text -->
            <v-list-item>
                <v-list-item-content>
                    <v-list-item-title class="headline">{{ competition.full_name }}</v-list-item-title>
                    <v-list-item-subtitle>{{competition.country}} : {{competitonDateFormatter(competition)}}
                    </v-list-item-subtitle>
                </v-list-item-content>
            </v-list-item>

            <!-- Displays description if there is one -->
            <template v-if="competition.basic_description">
                <v-card-title>Description</v-card-title>
                <v-card-text>{{ competition.basic_description }}</v-card-text>
            </template>


            <!-- Action Buttons -->
            <v-card-actions>
                <v-btn v-if="competition.entry_link" text color="deep-purple accent-4" :href="competition.entry_link">
                    Register
                </v-btn>
            </v-card-actions>
        </v-card>

    </v-app>

    <!-- production version of Vue 2 and Vuetify -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>

    <!-- Axios - Library to pull in JSON data -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script>
        new Vue({
            el: '#app',
            vuetify: new Vuetify(),
            data() {
                return {
                    competitions: [],
                    months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August',
                        'September', 'October', 'November', 'December'],
                }
            },
            mounted() {
                axios.get('https://file.opentrack.run/live/euroath/european_calendar_2020.json')
                    .then(response => {
                        this.competitions = response.data;
                    })
            },
            methods: {
                competitonDateFormatter(competition) {
                    if (competition.date == competition.finish_date) {
                        return competition.date
                    } else {
                        return competition.date + " - " + competition.finish_date
                    }
                }
            }
        })
    </script>
</body>

</html>